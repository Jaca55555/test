<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <object th:include="fragments/includes_top :: top" th:remove="tag" ></object>
    <!-- smart-wizard css -->
    <link rel="stylesheet" href="/static/plugins/smart-wizard/css/smart_wizard.min.css">
    <link rel="stylesheet" href="/static/plugins/smart-wizard/css/smart_wizard_theme_dots.min.css">
    <!-- Bootstrap datetimepicker css -->
    <link rel="stylesheet" href="/static/plugins/bootstrap-datetimepicker/css/bootstrap-datepicker3.min.css">
    <link rel="stylesheet" th:href="@{/static/modal-window-effects/css/md-modal.css}">
    <style>
        .border-bottom-styled {
            border-bottom: 1px solid #000;
            width: 100%;
            margin-top: 20px
        }

        .add-file {
            background-color: #F4F7FA;
            border: 1px solid #CED4DA;
            height: 150px;
            width: 100%;
        }

        .add-file i {
            font-size: 60px;
            position: relative;
            float: left;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .file {
            position: relative;
            background-color: #F4F7FA;
            border: 1px solid #CED4DA;
            height: 150px;
            width: 100%;
            color: #748892;
        }

        .file-icon {
            font-size: 60px;
            position: relative;
            float: left;
            top: 35%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .file span {
            position: absolute;
            bottom: 35px;
            width: 100%;
            text-align: center;
            left: 0;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }
        .file p {
            position: absolute;
            bottom: 10px;
            width: 100%;
            text-align: center;
            left: 0;
            font-size: 10px;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        .file a{
            color: #748892;
        }

        .file a:hover {
            color: #5CB85C;
        }
        .file-delete-btn {
            color: red;
            position: absolute;
            right: 0;
            border: none;
            margin: 5px;
        }
        .file-delete-btn:hover {
            color:darkred;
        }

        #upload-gif{
            position: relative;
            float: left;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 125px;
        }

        #percentage {
            position: absolute;
            top: 60%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
        }
    </style>
</head>
<body class="layout-6">
    <!-- [ Pre-loader ] start -->
    <div class="loader-bg">
        <div class="loader-track">
            <div class="loader-fill"></div>
        </div>
    </div>
    <!-- [ Pre-loader ] End -->

    <object th:include="fragments/navigation_menu :: menu" th:remove="tag" ></object>

    <object th:include="fragments/header :: head" th:remove="tag" ></object>

    <!-- [ Main Content ] start -->
    <div class="pcoded-main-container">
        <div class="pcoded-wrapper">
            <div class="pcoded-content">
                <div class="pcoded-inner-content">
                    <div class="main-body">
                        <div class="page-wrapper">
                            <!-- [ Main Content ] start -->
                            <div class="row">
                                <!-- [ sample-page ] start -->
                                <div class="col-sm-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 >
                                                <span th:text="#{reg_application.number}"></span>&nbsp;
                                                <span th:text="${regApplication.id}"></span>
                                            </h5>
                                        </div>
                                        <div class="card-body">

                                            <object th:include="reg/step_wizard :: wizard" th:remove="tag" ></object>

                                            <div class="container mt-lg-5">

                                                    <div class="col-md-12 text-center " style="color: #2f9c0a;">
                                                                    <span class="hei-75 wid-75 d-inline-block mr-4">
                                                                        <img src="/static/images/check.png" style="width: 100%; height: 100%">
                                                                    </span>
                                                        <span class="f-48 font-weight-bold" style="vertical-align: middle" th:text="#{reg_application.status_Approved}"> Ваша заявка принята</span></br>
                                                        <span class="f-24" style="margin-left: 125px" th:text="#{reg_application.deadline}">Срок исполнение заявки:</span>&nbsp;<span class="f-24" th:text="${#dates.format(regApplication.deadlineDate, 'dd.MM.yyyy')}"></span>
                                                        <div th:each="changeDeadlineDate : ${changeDeadlineDateList}" th:if="${#lists.size(changeDeadlineDateList)>0 and changeDeadlineDate.changeDeadlineDateStatus==T(uz.maroqand.ecology.core.constant.expertise.ChangeDeadlineDateStatus).Approved}" style="color: #3d8af7">
                                                            <span class="f-24" style="margin-left: 125px" th:text="#{reg_application.deadline_change}">Срок исполнение заявки:</span>&nbsp;<span class="f-24" th:text="${#dates.format(changeDeadlineDate.beforeDeadlineDate, 'dd.MM.yyyy')}"></span>
                                                        </div>
                                                    </div>

                                                <div class="mt-lg-5 mb-lg-5" style="border-bottom: #f5f5f5 3px solid"></div>
                                                <div class="container text-dark" id="accountBox" th:if="${regApplication.status!=null && (regApplication.status==T(uz.maroqand.ecology.core.constant.expertise.RegApplicationStatus).Approved || regApplication.status==T(uz.maroqand.ecology.core.constant.expertise.RegApplicationStatus).Revision)}">
                                                    <div style="text-align: center">
                                                        <h3>СЧЕТ-ФАКТУРА № 165 от 07 февраля 2019 г.</h3>
                                                        <h4>к товарно-отгрузочным документам № 04/2019 от 04.01.2019</h4>
                                                    </div>
                                                    <table class="mt-5">
                                                        <tr>
                                                            <td>
                                                                <span th:text="#{sys_provider}"></span>:
                                                            </td>
                                                            <td><b style="border-bottom: 1px solid #000000"><span th:text="${invoice.payerName}"></span></b></td>
                                                            <td>
                                                                <span th:text="#{sys_customer}"></span>:
                                                            </td>
                                                            <td>
                                                                <b style="border-bottom: 1px solid #000000"><span th:text="${@helperService.getOrganizationName(invoice.payeeId,#locale)}">"SURHAN GAS CHEMICAL OPERATING COMPANY"</span></b>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><span th:text="#{sys_address}"></span>:</td>
                                                            <td><span style="border-bottom: 1px solid #000000">100047, Яшнаабадский р-н, Ташкент, Тойтепа, дом № 2, корпус А</span></td>
                                                            <td><span th:text="#{sys_address}"></span>:</td>
                                                            <td> <span style="border-bottom: 1px solid #000000" th:text="${invoice.payeeAddress}">Toshkent shahri, Mirobod tumani ул.Т.Шевченко д.7</span></td>
                                                        </tr>
                                                        <tr>
                                                            <td><span th:text="#{sys_tin_fullname}"></span>(<span th:text="#{sys_tin}"></span>)</td>
                                                            <td><span style="border-bottom: 1px solid #000000">200934834</span></td>
                                                            <td><span th:text="#{sys_tin_fullname}"></span>(<span th:text="#{sys_tin}"></span>)</td>
                                                            <td><span style="border-bottom: 1px solid #000000" th:text="${invoice.payeeTin}">304875292</span></td>
                                                        </tr>
                                                        <tr>
                                                            <td><span th:text="#{sys_reg_code}">Регистрационный код плательщика</span><br /><span th:text="#{sys_nds}"></span>:</td>
                                                            <td><span style="border-bottom: 1px solid #000000">326080023231</span></td>
                                                            <td><span th:text="#{sys_reg_code}">Регистрационный код плательщика</span><br /><span th:text="#{sys_nds}"></span>:</td>
                                                            <td><span style="border-bottom: 1px solid #000000">326010015000</span></td>
                                                        </tr>
                                                    </table>
                                                    <table class="table table-bordered mt-5">
                                                        <tr>
                                                            <td rowspan="3">№</td>
                                                            <td rowspan="2"><span th:text="#{sys_name_product}">Наименование товаров (работ, услуг)</span></td>
                                                            <td rowspan="2"><span th:text="#{sys_currency}">Ед.</span></td>
                                                            <td rowspan="2"><span th:text="#{sys_qty}">Кол-во</span></td>
                                                            <td rowspan="2"><span th:text="#{sys_price}">Цена</span></td>
                                                            <td rowspan="2"><span th:text="#{sys_provisionCost}">Стоимость поставки</span></td>
                                                            <td colspan="2" class="text-center"><span th:text="#{sys_nds}"></span></td>
                                                            <td rowspan="2"><span th:text="#{sys_provisionCost_withNDS}">Стоимость поставки с учетом</span><span th:text="#{' ' + sys_nds}"> НДС</span></td>
                                                        </tr>
                                                        <tr>
                                                            <td><span th:text="#{sys_count}">Став-ка</span></td>
                                                            <td><span th:text="#{sys_amount}">Сумма</span></td>
                                                        </tr>
                                                        <tr>
                                                            <td>1</td>
                                                            <td>2</td>
                                                            <td>3</td>
                                                            <td>4</td>
                                                            <td>5</td>
                                                            <td>6</td>
                                                            <td>7</td>
                                                            <td>8</td>
                                                        </tr>
                                                        <tr>
                                                            <td>1</td>
                                                            <td th:text="${@helperService.getMaterials(regApplication.materials,#locale)}">Проведение экологической экспертизы</td>
                                                            <td>сум</td>
                                                            <td> </td>
                                                            <td> </td>
                                                            <td class="text-right">5068250</td>
                                                            <td>0%</td>
                                                            <td class="text-right">Без НДС</td>
                                                            <td class="text-right">5068250</td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="2" class="text-right">Итого:</td>
                                                            <td></td>
                                                            <td></td>
                                                            <td></td>
                                                            <td class="text-right">5068250</td>
                                                            <td></td>
                                                            <td class="text-right">Без НДС</td>
                                                            <td class="text-right">5068250</td>
                                                        </tr>
                                                    </table>

                                                    <div class="col-md-12">
                                                        <b>Всего к оплате: Пять миллионов шестьдесят восемь тысяч двести пятьдесят сум 00 тийин</b>
                                                    </div>
                                                    <table>
                                                        <tr>
                                                            <td><span th:text="#{sys_director}">Руководитель</span>:</td>
                                                            <td style="width: 200px">
                                                                <div class="border-bottom-styled"></div>
                                                            </td>
                                                            <td>Shukurov G'.B.</td>
                                                            <td style="width: 200px"></td>
                                                            <td><span th:text="#{sys_recieved}">Получил</span>:</td>
                                                            <td style="padding-top: 30px">
                                                                <span style="border-top: 1px solid #000000;">(<span>Подпись покупателя или уполномоченного представителя</span>)</span>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><span th:text="#{sys_accountant}">Главный бухгалтер</span>:</td>
                                                            <td style="width: 200px">
                                                                <div class="border-bottom-styled"></div>
                                                            </td>
                                                            <td><span>Matyokubov M. H.</span></td>
                                                            <td></td>
                                                            <td></td>
                                                            <td></td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding-top: 20px"><span th:text="#{sys_productSender}">Товар отпустил</span>:</td>
                                                            <td style="width: 200px;padding-top: 20px">
                                                                <div class="border-bottom-styled"></div>
                                                            </td>
                                                            <td></td>
                                                            <td></td>
                                                            <td></td>
                                                            <td></td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding-top: 20px">М.П.</td>
                                                            <td></td>
                                                            <td></td>
                                                            <td></td>
                                                            <td></td>
                                                            <td></td>
                                                        </tr>
                                                    </table>
                                                </div>
                                                <div class="col-md-12 text-center mb-5" th:if="${regApplication.status!=null && (regApplication.status==T(uz.maroqand.ecology.core.constant.expertise.RegApplicationStatus).Approved || regApplication.status==T(uz.maroqand.ecology.core.constant.expertise.RegApplicationStatus).Revision)}">
                                                    <button type="button" class="btn btn-primary" th:text="#{sys_print}" onclick="printAccountFactor('accountBox')"></button>
                                                </div>

                                                <h3 th:text="#{sys_chat}" class="text-center"></h3>

                                                <div class="col-md-6 offset-3">
                                                    <textarea class="p-2" style="width: 100%; resize: none; border-radius: 10px" rows="4" id="message" required="" minlength="3" th:placeholder="#{sys_comment.messagePlaceholder}"></textarea>
                                                    <p class="mt-2 mb-0" style="color: black" th:text="#{sys_comment.addFile}">Добавить файл</p>
                                                    <div class="col-md-12 row" id="files-div-comment">
                                                        <a href="#upload-file-modal-comment" class="col-md-3 pb-3 p-0" onclick="openCommentModalFile()">
                                                            <div class="add-file">
                                                                <img src="/static/images/uploading.gif" alt="" id="upload-gif" style="display: none;">
                                                                <span id="percentage"><span id="percentage-num"></span>%</span>
                                                                <i class="feather icon-plus" id="plus-icon"></i>
                                                            </div>
                                                        </a>

                                                    </div>
                                                </div>

                                                <div class="col-md-12 text-center mt-2 mr-0 mb-lg-5" >
                                                    <button class="btn btn-primary pl-lg-3 pr-lg-3 mr-0" onclick="addComment()">
                                                        <i class="mdi mdi-telegram"></i>
                                                        <span th:text="#{sys_send}"></span>
                                                    </button>
                                                </div>
                                                <input type="hidden" id="commentId" name="commentId"/>
                                                <h3 th:text="#{sys_comment}" id="comment-title" class="text-center mt-lg-5"></h3>
                                                <div class="col-md-6 offset-3" id="comments">
                                                    <div id="comments-first"></div>
                                                    <div class="row" th:each="comment : ${commentList}" th:if="${#lists.size(commentList)>0}">
                                                        <div class="col-md-2">
                                                            <span class="hei-50 wid-50 d-inline-block rounded-circle font-weight-bold text-center f-18" style="color: white; padding-top: 15%; background-color: #bdc0c3" th:text="${@helperService.getUserLastAndFirstShortById(comment.createdById)}">AB</span>
                                                        </div>
                                                        <div class="col-md-10 pl-0">
                                                            <p class="p-2 mb-1 mt-lg-4" th:text="${comment.message}" style="width: 100%;border: #7d878c 1px solid;border-radius: 5px"></p>
                                                            <p class="text-right" th:if="${comment.createdAt!=null}" th:text="${#dates.format(comment.createdAt, 'dd.MM.yyyy HH:mm:ss')}"></p>
                                                            <div style="border-bottom: black 1px dashed">
                                                                <ul class="media-list p-0" th:if="${#lists.size(comment.documentFiles)>0}" th:each="files : ${comment.documentFiles}">
                                                                    <li class="media d-flex m-b-15">
                                                                        <div class="m-r-20 file-attach">
                                                                            <i class="mdi mdi-file-pdf f-28 text-muted"></i>
                                                                        </div>
                                                                        <div class="media-body">
                                                                            <a th:href="${T(uz.maroqand.ecology.ecoexpertise.constant.reg.RegUrls).RegApplicationCommentDownload + '?file_id=' + files.id + '&comment_id=' + comment.id}" class="m-b-5 d-block text-secondary">
                                                                                <span th:text="${files.name}">Письмо КМК-234 от 23.01.2019 г.pdf</span>
                                                                            </a>
                                                                            <div class="text-muted">
                                                                                <span th:text="${'Size: '+files.size+ ' byte'}">Size: 1.2Mb</span>
                                                                            </div>
                                                                        </div>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-5 offset-4 text-center mt-2 mr-0 " th:if="${#lists.size(commentList)>5}">
                                                        <button class="btn btn-outline-secondary pl-lg-3 pr-lg-3 mr-0 btn-block" >
                                                            <span th:text="#{sys_comments_full}"></span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- [ sample-page ] end -->
                            </div>
                            <!-- [ Main Content ] end -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="upload-file-modal-comment" tabindex="-1" role="dialog" aria-labelledby="upload-file-modal-commentTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" th:text="#{sys_comment.upload_files}" style="float: left">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="file-name-comment">
                            <span th:text="#{sys_file_name}"></span>
                            <span class="required">*</span>
                        </label>
                        <input class="form-control" type="text" id="file-name-comment" required=""  />
                    </div>
                    <div class="input-group">
                          <span class="input-group-btn">
                            <span class="btn btn-primary" style="border-bottom-right-radius: 0px;border-top-right-radius: 0px" onclick="$(this).parent().find('input[type=file]').click();">
                               <i class="mdi mdi-file-download-outline"></i> <span th:text="#{file_select}"></span>
                            </span>
                            <input name="uploaded_file" id="file-input-comment" onchange="$(this).parent().parent().find('.form-control').html($(this).val().split(/[\\|/]/).pop());" style="display: none;" type="file">
                          </span>
                        <span class="form-control" onclick="$(this).parent().find('input[type=file]').click();" id="commentFileDescription" style="border-bottom-left-radius: 0px;border-top-left-radius: 0px" >

                        </span>
                    </div>
                </div>
                <div class="modal-footer" style="text-align: center;">
                    <button class="btn btn-info" type="button" th:text="#{sys_upload}" onclick="uploadCommentFile()"></button>
                </div>
            </div>
        </div>
    </div>

    <!-- [ Main Content ] end -->
    <object th:include="fragments/includes_bottom :: bottom" th:remove="tag" ></object>
    <script type="text/javascript" src="/static/parsley/parsley.min.js"></script>
    <script th:src="@{'/static/parsley/i18n/' + __${#locale}__ + '.js'}"></script>
    <script th:inline="javascript">
        var regApplicationId = [[${regApplication.id}]];
        var uploadCommentFileAjaxUrl = [[${T(uz.maroqand.ecology.ecoexpertise.constant.reg.RegUrls).RegApplicationCommentFileUpload}]];
        var deleteCommentFileAjaxUrl = [[${T(uz.maroqand.ecology.ecoexpertise.constant.reg.RegUrls).RegApplicationCommentDelete}]];
        var downloadCommentFileAjaxUrl = [[${T(uz.maroqand.ecology.ecoexpertise.constant.reg.RegUrls).RegApplicationCommentDownload}]];
        var addCommentUrl = [[${T(uz.maroqand.ecology.ecoexpertise.constant.reg.RegUrls).RegApplicationCommentAdd}]];

        function openCommentModalFile() {
            $('#upload-file-modal-comment').modal('show');
        }

        function uploadCommentFile(){
            $('#file-name-comment').parsley().validate();
            if(!$('#file-name-comment').val() || !$('#file-input-comment').val()){
                $('#commentFileDescription').addClass('is-invalid');
                return;
            }

            $('#upload-file-modal-comment').modal('hide');

            var form = new FormData();
            form.append("id", $('#commentId').val());
            form.append("regApplicationId", regApplicationId);
            form.append("file", $('#file-input-comment').prop('files')[0]);
            form.append("file_name", $('#file-name-comment').val());
            form.append("_csrf", $('#global_csrf').val());

            $.ajax({
                url: uploadCommentFileAjaxUrl,
                type: "POST",
                data: form,
                processData: false,
                contentType: false,
                cache: false,
                success: function (response) {
                    console.log(response);
                    if(response.status == 1) {
                        $('#files-div-comment').append('<div class="col-md-3 pb-3 p-0 ml-1" id="file-block-'+response.fileId+'">\n' +
                            '                                                    <div class="file">\n' +
                            '                                                        <a href="'+response.link+'">\n' +
                            '                                                            <i class="feather icon-file file-icon"></i>\n' +
                            '                                                            <span>'+response.description+'</span>\n' +
                            '                                                            <p>'+response.name+'</p>\n' +
                            '                                                        </a>\n' +
                            '                                                        <button type="button" class="file-delete-btn" onclick="deleteCommentFile('+response.fileId+')">\n' +
                            '                                                            <i class="feather icon-x"></i>\n' +
                            '                                                        </button>\n' +
                            '                                                    </div>\n' +
                            '                                                </div>');
                        $('#commentId').val(response.commentId);
                        cleareAfterUploadFile();
                    }
                },
                beforeSend: function () {
                    $('#plus-icon').hide();
                    $('#upload-gif').show();
                    $('#percentage').show();
                },
                complete: function () {
                    $('#upload-gif').hide();
                    $('#percentage').hide();
                    $('#plus-icon').show();
                },
                xhr: function() {
                    var xhr = new window.XMLHttpRequest();
                    xhr.upload.addEventListener("progress",
                        uploadProgressHandler,
                        false
                    );

                    return xhr;
                }

            });
        }

        function  clearAfterCommetAdd() {
            $('#commentId').val('');
            $('#message').val('');
            $('#files-div-comment').html('');
            $('#files-div-comment').append('<a href="#upload-file-modal-comment" class="col-md-3 pb-3 p-0" onclick="openCommentModalFile()">\n' +
                '                            <div class="add-file">\n' +
                '                                <img src="/static/images/uploading.gif" alt="" id="upload-gif" style="display: none;">\n' +
                '                                <span id="percentage"><span id="percentage-num"></span>%</span>\n' +
                '                                <i class="feather icon-plus" id="plus-icon"></i>\n' +
                '                            </div>\n' +
                '                        </a>');
        }

        function cleareAfterUploadFile() {
            $('#file-input-comment').val('');
            $('#file-name-comment').val('');
            $('#commentFileDescription').text('');
        }

        function deleteCommentFile(fileId) {
            var form = new FormData();
            form.append("id", $('#commentId').val());
            form.append("regApplicationId", regApplicationId);
            form.append("fileId", fileId);
            form.append("_csrf", $('#global_csrf').val());

            $.ajax({
                url: deleteCommentFileAjaxUrl,
                type: "POST",
                data: form,
                processData: false,
                contentType: false,
                cache: false,
                success: function (response) {
                    if(response.status == 1) {
                        $('#file-block-' + fileId).remove();
                    }
                }
            });
        }

        function uploadProgressHandler(event){
            var percent = (event.loaded / event.total) * 100;
            var progress = Math.round(percent);
            $('#percentage-num').html(progress);
        }

        function addComment() {
            $('#message').parsley().validate();
            if ($('#message').parsley().isValid()){
                var form = new FormData();
                form.append("id", $('#commentId').val());
                form.append("regApplicationId", regApplicationId);
                form.append("message", $('#message').val());
                form.append("_csrf", $('#global_csrf').val());
                $.ajax({
                    url: addCommentUrl,
                    type: "POST",
                    data: form,
                    processData: false,
                    contentType: false,
                    cache: false,
                    success: function (response) {
                        if (response.status==1){
                            var html='<div class="row" >' +
                                '           <div class="col-md-2">\n' +
                                '               <span class="hei-50 wid-50 d-inline-block rounded-circle font-weight-bold text-center f-18" style="color: white; padding-top: 15%; background-color: #bdc0c3">'+response.userShorName+'</span>\n' +
                                '           </div>\n' +
                                '           <div class="col-md-10 pl-0">\n' +
                                '               <p class="p-2 mb-1 mt-lg-4" style="width: 100%;border: #7d878c 1px solid;border-radius: 5px">'+response.message+'</p>' +
                                '               <p class="text-right">'+response.createdAt+'</p>'+
                                '               <div style="border-bottom: black 1px dashed">';

                            if (response.commentFiles!=""){
                                $.each(response.commentFiles,function (item,val) {
                                    var downloadUrl = downloadCommentFileAjaxUrl + '?file_id=' + val.id + '&comment_id=' + $('#commentId').val();
                                    html+='<ul class="media-list p-0">\n' +
                                        '       <li class="media d-flex m-b-15">\n' +
                                        '           <div class="m-r-20 file-attach">\n' +
                                        '               <i class="mdi mdi-file-pdf f-28 text-muted"></i>\n' +
                                        '           </div>\n' +
                                        '           <div class="media-body">\n' +
                                        '               <a href="'+downloadUrl+'" class="m-b-5 d-block text-secondary">\n' +
                                        '                   <span>'+val.name+'</span>\n' +
                                        '               </a>\n' +
                                        '               <div class="text-muted">' +
                                        '                   <span>'+val.size+'</span>' +
                                        '               </div>' +
                                        '           </div>' +
                                        '       </li>' +
                                        '   </ul>';
                                });
                            }

                            html+='</div></div></div>';
                            $('#comments').append(html);
                            clearAfterCommetAdd();
                        }
                    }
                });
            }
        }
        function printAccountFactor(blockname) {
            var printContents = document.getElementById(blockname).innerHTML;
            var originalContents = document.body.innerHTML;
            document.body.innerHTML = printContents;
            window.print();
            document.body.innerHTML = originalContents;
        }
    </script>
</body>
</html>