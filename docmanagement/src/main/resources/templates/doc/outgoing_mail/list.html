<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta th:include="fragments/head :: top" th:remove="tag">
    <title th:text="#{sys_site_main_title}">Kiruvchi Xatlar Ro'yxati</title>
    <link href="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css">
    <style>
        .ui-menu-item-wrapper:hover{
            color:white;
            background:#62c462;
        }
    </style>
</head>
<body>
<div class="background"></div>

<!-- [ Pre-loader ] start -->
<div class="loader-bg">
    <div class="loader-track">
        <div class="loader-fill"></div>
    </div>
</div>
<!-- [ Pre-loader ] end -->

<object th:include="fragments/nav_menu :: menu" th:remove="tag" ></object>

<object th:include="fragments/navbar :: navbar" th:remove="tag" ></object>

<!-- main content start -->
<div class="pcoded-main-container">
    <div class="col-xl-12 col-md-12">
        <div class="card parent-card">
            <div class="card-header flex-space-between-nowrap">
                <h5 class="mb-0" style="align-self:center">
                    <a href="/static/doc/" class="collapsed card-header-a"
                       data-toggle="collapse" data-target="#collapseTopContainer"
                       aria-expanded="false" aria-controls="collapseOne">Девонхона хужжатлар иш столи</a>
                </h5>
                <div>
                    <input type="text" class="form-control">
                    <i class="gray-arrow fas fa-search  color-green pointer" style="top:27px;right:30px;"></i>
                </div>
            </div>
            <h5 class="office-h5 default-color">Кирувчи хатлар статистикаси</h5>
            <div class="responsive">
                <div class="office-card">
                    <div class="card dashboard-card border-primary-shadow">
                        <!--<img class="card-svg" src="/static/doc/images/mail_incoming.svg" alt="">-->
                        <div class="file-icon-container-small color-purple"><span class="hawcons-icon-1-mail-envelope"></span></div>
                        <div class="card-body" style="display: inline-block;text-align: center;">
                            <h4 class="card-title">10</h4>
                            <h6 class="card-title">Жами чикувчи хатлар</h6>
                        </div>
                    </div>
                </div>
                <div class="office-card">
                    <div class="card dashboard-card border-danger-shadow">
                        <div class="file-icon-container-small color-yellow"><span class="hawcons-icon-4-mail-envelope-open"></span></div>
                        <div class="card-body" style="display: inline-block;text-align: center;">
                            <h4 class="card-title">20</h4>
                            <h6 class="card-title">Жами чикувчи хатлар</h6>
                        </div>
                    </div>
                </div>
                <div class="office-card">
                    <div class="card dashboard-card border-warning-shadow">
                        <div class="file-icon-container-small color-yellow"><span class=" hawcons-icon-8-mail-error"></span></div>
                        <div class="card-body" style="display: inline-block;text-align: center;">
                            <h4 class="card-title">30</h4>
                            <h6 class="card-title">Жами чикувчи хатлар</h6>
                        </div>
                    </div>
                </div>
                <div class="office-card">
                    <div class="card dashboard-card border-green-shadow">
                        <div class="file-icon-container-small color-red"><span class="hawcons-icon-10-mail-cancel"></span></div>
                        <div class="card-body" style="display: inline-block;text-align: center;">
                            <h4 class="card-title">40</h4>
                            <h6 class="card-title">Жами чикувчи хатлар</h6>
                        </div>
                    </div>
                </div>
                <div class="office-card">
                    <div class="card dashboard-card border-green-shadow">
                        <div class="file-icon-container-small color-green"><span class="hawcons-icon-9-mail-checked"></span></div>
                        <div class="card-body" style="display: inline-block;text-align: center;">
                            <h4 class="card-title">40</h4>
                            <h6 class="card-title">Жами чикувчи хатлар</h6>
                        </div>
                    </div>
                </div>
                <div class="office-card">
                    <div class="card dashboard-card border-green-shadow">
                        <div class="file-icon-container-small color-primary"><span class="hawcons-icon-92-inbox-download"></span></div>
                        <div class="card-body" style="display: inline-block;text-align: center;">
                            <h4 class="card-title">40</h4>
                            <h6 class="card-title">Жами чикувчи хатлар</h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card parent-card">
            <div class="card-header flex-space-between-nowrap">
                <h5 class="mb-0" style="align-self:center">
                    <a href="/static/doc/" class="collapsed card-header-a"
                       data-toggle="collapse" data-target="#collapseTopContainer"
                       aria-expanded="false" aria-controls="collapseOne">Сараш фильтри</a>
                </h5>
            </div>
            <div class="col-xl-12 col-md-12 accordion parent-card" id="accordionExample">
                <!-- filters card begins here -->
                <form style="border-radius: 5px" id="filter">
                    <div class="row card-body" style="padding-bottom: 0;">
                        <div class="form-group col-md-3 col-sm-12">
                            <label for="tin" class="control-label">Корреспондент</label>
                            <div class="col-sm-12 p0">
                                <select id="tin" class="multiselect col-sm-12 select2-hidden-accessible" multiple="" tabindex="-1"
                                        aria-hidden="true">
                                    <option th:each="organization: ${organizationList}" th:value="${organization.id}" th:text="${organization.name}"></option>
                                </select>
                                <i class="gray-arrow fas fa-sort-down color-gray"></i>
                            </div>
                        </div>
                        <div class="form-group col-md-1 col-sm-12">
                            <label for="name" class="control-label">Хужжат раками</label>
                            <input type="text" class="form-control" id="name">
                        </div>
                        <div class="form-group col-md-3 col-sm-12">
                            <label for="applicationId" class="control-label">Руйхатга олиш раками</label>
                            <input type="text" class="form-control" id="applicationId">
                        </div>
                        <div class="form-group col-md-3 col-sm-12">
                            <label for="dateBegin" class="control-label">Келиб тушган сана</label>
                            <div class="row">
                                <div class="col-6" style="padding-left: 0;">
                                    <input class="form-control datepicker date" id="dateBegin" placeholder="Дан">
                                    <i class="gray-arrow mdi mdi-calendar color-gray" style="right:23px"></i>
                                </div>
                                <div class="col-6" style="padding-right:0;">
                                    <input class="form-control datepicker date" id="dateEnd" placeholder="гача">
                                    <i class="gray-arrow mdi mdi-calendar color-gray"></i>
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-md-2 col-sm-12">
                            <label for="regionId" class="control-label">Назорат карточкаси</label>
                            <div class="col-sm-12 p0">
                                <select class="multiselect col-sm-12 select2-hidden-accessible" multiple="" tabindex="-1"
                                        id="regionId" aria-hidden="true">
                                    <option value="AL">Alabama</option>
                                    <option value="WY">Wyoming</option>
                                    <option value="WY">Coming</option>
                                    <option value="WY">Hanry Die</option>
                                    <option value="WY">John Doe</option>
                                </select>
                                <i class="gray-arrow fas fa-sort-down color-gray"></i>
                            </div>
                        </div>
                        <div class="form-group col-md-3 col-sm-12">
                            <label class="control-label">Ижрочилар</label>
                            <div class="col-sm-12 p0">
                                <select class="multiselect col-sm-12 select2-hidden-accessible" multiple=""
                                        tabindex="-1" aria-hidden="true">
                                    <option value="AL">Alabama</option>
                                    <option value="WY">Wyoming</option>
                                    <option value="WY">Coming</option>
                                    <option value="WY">Hanry Die</option>
                                    <option value="WY">John Doe</option>
                                </select>
                                <i class="gray-arrow fas fa-sort-down color-gray"></i>
                            </div>
                        </div>
                        <div class="form-group col-md-3 col-sm-12">
                            <label for="subRegionId" class="control-label">Хатнинг қисқача мазмуни</label>
                            <div class="col-sm-12 p0">
                                <select class="multiselect col-sm-12 select2-hidden-accessible" multiple=""
                                        tabindex="-1" aria-hidden="true">
                                    <option value="AL">Alabama</option>
                                    <option value="WY">Wyoming</option>
                                    <option value="WY">Coming</option>
                                    <option value="WY">Hanry Die</option>
                                    <option value="WY">John Doe</option>
                                </select>
                                <i class="gray-search fas fa-search  color-gray"></i>
                            </div>
                        </div>
                        <div class="form-group col-md-2 col-sm-12">
                            <label class="control-label">Ижро йуналиши</label>
                            <div class="col-sm-12 p0">
                                <select class="multiselect col-sm-12 select2-hidden-accessible" multiple=""
                                        tabindex="-1" aria-hidden="true">
                                    <option value="AL">Alabama</option>
                                    <option value="WY">Wyoming</option>
                                    <option value="WY">Coming</option>
                                    <option value="WY">Hanry Die</option>
                                    <option value="WY">John Doe</option>
                                </select>
                                <i class="gray-arrow fas fa-sort-down color-gray"></i>
                            </div>
                        </div>
                        <div class="form-group col-md-2 col-sm-12">
                            <label class="control-label">Жорий холати</label>
                            <div class="col-sm-12 p0">
                                <select class="multiselect col-sm-12 select2-hidden-accessible" multiple=""
                                        tabindex="-1" aria-hidden="true">
                                    <option value="AL">Alabama</option>
                                    <option value="WY">Wyoming</option>
                                    <option value="WY">Coming</option>
                                    <option value="WY">Hanry Die</option>
                                    <option value="WY">John Doe</option>
                                </select>
                                <i class="gray-arrow fas fa-sort-down color-gray"></i>
                            </div>
                        </div>
                        <div class="form-group col-md-2 col-sm-12" style="display: flex;align-items: flex-end;">
                            <button type="button" class="btn btn-primary mb-0" style="padding: 5px 20px;">искать</button>
                        </div>


                    </div>
                </form>
            </div>
        </div>

        <div class="parent-card col-xl-12">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item card-nav-item">
                    <a class="nav-link text-uppercase show active" id="home-tab" data-toggle="tab" href="#home" role="tab"
                       aria-controls="home" aria-selected="true">Жами</a>
                </li>
                <li class="nav-item card-nav-item">
                    <a class="nav-link text-uppercase show" id="profile-tab" data-toggle="tab" href="#profile"
                       role="tab" aria-controls="profile" aria-selected="false">Ижро учун</a>
                </li>
                <li class="nav-item card-nav-item">
                    <a class="nav-link text-uppercase show" id="contact-tab" data-toggle="tab" href="#contact"
                       role="tab" aria-controls="contact" aria-selected="false">Муддати кеччикан</a>
                </li>
                <li class="nav-item card-nav-item">
                    <a class="nav-link text-uppercase" id="home-tab1" data-toggle="tab" href="#home1" role="tab"
                       aria-controls="home" aria-selected="true">Муддати якинлашаётган</a>
                </li>
                <li class="nav-item card-nav-item">
                    <a class="nav-link text-uppercase show" id="profile-tab1" data-toggle="tab" href="#profile1"
                       role="tab" aria-controls="profile" aria-selected="false">Ижро назоратида</a>
                </li>
                <li class="nav-item card-nav-item">
                    <a class="nav-link text-uppercase show" id="contact-tab1" data-toggle="tab" href="#contact1"
                       role="tab" aria-controls="contact" aria-selected="false">Малъумот учун</a>
                </li>
                <li class="nav-item card-nav-item">
                    <a class="nav-link text-uppercase show" id="contact-tab2" data-toggle="tab" href="#contact2"
                       role="tab" aria-controls="contact" aria-selected="false">Якунланган</a>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade active show" id="home" role="tabpanel" aria-labelledby="home-tab">
                    <div class="table-responsive">
                        <div id="responsive-table-model_wrapper" class="dataTables_wrapper dt-bootstrap4 no-footer">
                            <div class="row">
                                <div class="col-sm-12">
                                    <table id="dynamicTable" aria-describedby="responsive-table-model_info"
                                           class="table table-striped table-hover dataTable" role="grid" style="width: 100%;">
                                        <thead>
                                        <tr role="row">
                                            <th>ID</th>
                                            <th aria-controls="responsive-table-model" aria-sort="ascending"
                                                class="sorting_asc" colspan="1" rowspan="1" style="width: 0px;" tabindex="0">
                                                Регистрация рақами
                                            </th>
                                            <th aria-controls="responsive-table-model" class="sorting"
                                                colspan="1" rowspan="1" style="width: 0px;" tabindex="0">
                                                Регистрация санаси
                                            </th>
                                            <th aria-controls="responsive-table-model" class="sorting"
                                                colspan="1" rowspan="1" style="width: 350px;" tabindex="0">
                                                Кирувчи хат маълумотлари
                                            </th>
                                            <th aria-controls="responsive-table-model" class="sorting"
                                                colspan="1" rowspan="1" style="width: 82px;" tabindex="0">
                                                Хужжат санаси
                                            </th>
                                            <th aria-controls="responsive-table-model" class="sorting"
                                                colspan="1" rowspan="1" style="width: 110px;"
                                                tabindex="0">Ижро муддати
                                            </th>
                                            <th aria-controls="responsive-table-model" class="sorting"
                                                colspan="1" rowspan="1" style="width: 140px;"
                                                tabindex="0">Жорий
                                                ҳолати
                                            </th>
                                            <th aria-controls="responsive-table-model" class="sorting"
                                                colspan="1" rowspan="1" style="width: 300px;"
                                                tabindex="0">Резолюция ва
                                                иштирокчилар
                                            </th>
                                            <th></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                    <p class="mb-0">Food truck fixie locavore, accusamus mcsweeney's marfa nulla single-origin coffee
                        squid. Exercitation +1 labore velit, blog sartorial PBR leggings next level wes anderson artisan
                        four loko
                        farm-to-table
                        craft beer twee. Qui photo booth letterpress, commodo enim craft beer mlkshk aliquip jean shorts
                        ullamco ad vinyl cillum PBR. Homo nostrud organic, assumenda labore aesthetic magna delectus
                        mollit.
                        Keytar helvetica VHS salvia yr, vero magna velit sapiente labore stumptown. Vegan fanny pack
                        odio cillum wes anderson 8-bit, sustainable jean shorts beard ut DIY ethical culpa terry
                        richardson
                        biodiesel. Art party scenester stumptown, tumblr butcher vero sint qui sapiente accusamus
                        tattooed echo park.</p>
                </div>
                <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                    <p class="mb-0">Etsy mixtape wayfarers, ethical wes anderson tofu before they sold out mcsweeney's
                        organic lomo retro fanny pack lo-fi farm-to-table readymade. Messenger bag gentrify pitchfork
                        tattooed
                        craft beer,
                        iphone skateboard locavore carles etsy salvia banksy hoodie helvetica. DIY synth PBR banksy
                        irony. Leggings gentrify squid 8-bit cred pitchfork. Williamsburg banh mi whatever gluten-free,
                        carles
                        pitchfork biodiesel fixie etsy retro mlkshk vice blog. Scenester cred you probably haven't heard
                        of them, vinyl craft beer blog stumptown. Pitchfork sustainable tofu synth chambray yr.</p>
                </div>
            </div>
        </div>


    </div>
</div>
<!--  main content end -->
<object th:include="fragments/footer :: footer" th:remove="tag" ></object>

<script th:inline="javascript">
    let ajaxListLink = [[${T(uz.maroqand.ecology.docmanagement.constant.DocUrls).OutgoingMailListAjax}]];
    let viewLink = [[${T(uz.maroqand.ecology.docmanagement.constant.DocUrls).OutgoingMailView}]];
    let editLink = [[${T(uz.maroqand.ecology.docmanagement.constant.DocUrls).OutgoingMailEdit}]];
    function getCurrentLanguage() {
        return [[__${#locale}__]];
    }
</script>

<script th:inline="none">

    let labelView = "view";
    let dataDatatableSelector;
    let thead;

    function getDatatableConnect() {
        dataDatatableSelector.DataTable().destroy();
        dataDatatableSelector.html(thead);

        datatableConnect();
    }

    function renderActionsColumn(data, type, row, meta) {
        var currentViewLink = viewLink + '?id=' + row[0];
        var html = '';
        html += '<div class="btn-group"><a class="btn btn-outline-info btn-sm" href="'+currentViewLink+'" title="'+labelView+'"><i class="feather icon-eye" style="margin-right: 0px;"></i></a></div>';
        html += '<div class="btn-group"><a class="btn btn-outline-warning btn-sm" href="'+editLink+'?id='+row[0]+'" title="'+labelView+'"><i class="feather icon-edit" style="margin-right: 0px;"></i></a></div>';
        return html;
    }
    function datatableConnect() {

        dataDatatableSelector.DataTable({
            responsive: {
                details: {
                    display: $.fn.dataTable.Responsive.display.modal({
                        header: function(row) {
                            var data = row.data();
                            return 'Details for ' + data[0] + ' ' + data[1];
                        }
                    }),
                    renderer: $.fn.dataTable.Responsive.renderer.tableAll({
                        tableClass: 'table'
                    })
                }
            },
            processing: true,
            serverSide: true,
            scrollX: true,
            pageLength: 25,
            lengthMenu: [ [25, 500, 1000], [25, 500, 1000] ],
            order: [[0, 'desc']],
            dom: 'lrtip',
            ajax : function (dataToSend, callback, settings) {
                let api = this.api();
                dataToSend.page = api !== undefined ? api.page() : 0;
                dataToSend.size = api !== undefined ? api.page.len() : 25;
             dataToSend.correspondent = $('#correspondent').val();
                dataToSend.documentId = $('#docId').val();
                dataToSend.registrationNumber = $('#regId').val();
                dataToSend.regsitrationDateBegin = $('#incomeDateBegin').val();
                dataToSend.regsitrationDateEnd = $('#incomeDateEnd').val();
                dataToSend.controlCard = $('#controlCard').val();
                dataToSend.documentType = $('#docType').val();
                dataToSend.correspondentType = $('#correspondentType').val();
                dataToSend.content = $('#description').val();
                dataToSend.chief = $('#chiefId').val();
                dataToSend.executors = $('#executorId').val();
                dataToSend.resolution = $('#resolution').val();
                dataToSend.executePath = $('#executeType').val();
                dataToSend.executeStatus = $('#executeStatus').val();
                dataToSend.executeDateBegin = $('#executeDateBegin').val();
                dataToSend.executeDateEnd = $('#executeDateEnd').val();
                dataToSend.executeControlStatus = $('#executeControlStatus').val();
                dataToSend.insidePurposeStatus = $('#isInternal').val();
                dataToSend.coexecutorStatus = $('#coexecutorStatus').val();
                dataToSend.replies = $('#response').val();

                $.get( ajaxListLink, dataToSend, function(data){
                    callback(data);
                    console.log(data);
                });
            },
            columns: [
                {data: 0, name: 'id', visible: false},
                {data: 1, name: 'registrationNumber'},
                {data: 2, name: 'registrationDate'},
                {data: 3, name: 'description'},
                {data: 4, name: 'createdAt'},
                {data: 5, name: 'dueDate'},
                {data: 6, name: 'status'},
                {data: 7, name: 'resolution'},
                {render: renderActionsColumn, orderable: false}
            ],
            language: {
                'url': '/static/datatables/lang_' + getCurrentLanguage() + '.json'
            }
        });
    }
    $(document).ready(function () {
        dataDatatableSelector = $('#dynamicTable');
        thead = dataDatatableSelector.html();
        datatableConnect();

        $('#filter').on('change', function () {
            getDatatableConnect();
        })
    })





    //
    // async function getOrganizationNames(req){
    //     return await fetch(req)
    //         .then((response) => {
    //             return response.json()
    //         });
    // }

    // $( function() {
    //     getOrganizationNames(ajaxListLink)
    //         .then((data) => {
    //             console.log(data);
    //             let table = document.querySelector('#dynamicTableBody');
    //             let currentViewLink = '';
    //             let currentEditLink = '';
    //             for(let i = 0; i < data.data.length; i++){
    //                 table.innerHTML += (`<tr>
    //                                         <td>${data.data[i][1]}</td>
    //                                         <td>${data.data[i][2]}</td>
    //                                         <td>${data.data[i][3]}</td>
    //                                         <td>${data.data[i][4]}</td>
    //                                         <td>${data.data[i][5]}</td>
    //                                         <td>${data.data[i][6]}</td>
    //                                         <td>${data.data[i][7]}</td>
    //                                      </tr>`);
    //             }
    //              $('#dynamicTable').DataTable({
    //                  responsive: {
    //                      details: {
    //                          display: $.fn.dataTable.Responsive.display.modal({
    //                              header: function(row) {
    //                                  var data = row.data();
    //                                  return 'Details for ' + data[0] + ' ' + data[1];
    //                              }
    //                          }),
    //                          renderer: $.fn.dataTable.Responsive.renderer.tableAll({
    //                              tableClass: 'table'
    //                          })
    //                      }
    //                  }
    //              });
    //         })
    // } );





</script>


</body>
</html>